<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Weather App with Analysis</title>
  <style>
    /* General Reset and Layout */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    body {
      background: linear-gradient(to right, #4facfe, #00f2fe);
      min-height: 100vh;
      color: #333;
      padding: 20px;
    }

    /* Main Container */
    .container {
      max-width: 1200px;
      margin: 0 auto;
    }

    /* Navigation */
    .nav-tabs {
      display: flex;
      background: white;
      border-radius: 12px 12px 0 0;
      overflow: hidden;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .tab-btn {
      flex: 1;
      padding: 15px 20px;
      border: none;
      background: #f8f9fa;
      cursor: pointer;
      font-size: 16px;
      font-weight: 500;
      transition: all 0.3s;
      border-bottom: 3px solid transparent;
    }

    .tab-btn.active {
      background: white;
      border-bottom-color: #4facfe;
      color: #4facfe;
    }

    .tab-btn:hover {
      background: #e9ecef;
    }

    /* Content Area */
    .content {
      background: white;
      border-radius: 0 0 12px 12px;
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
      min-height: 600px;
    }

    .tab-content {
      display: none;
      padding: 30px;
      animation: fadeIn 0.3s ease-in-out;
    }

    .tab-content.active {
      display: block;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Search Section */
    .search-section {
      margin-bottom: 30px;
    }

    .search-container {
      display: flex;
      gap: 15px;
      align-items: center;
      flex-wrap: wrap;
    }

    .search-box {
      flex: 1;
      min-width: 250px;
      position: relative;
    }

    input[type="text"] {
      width: 100%;
      padding: 12px 16px;
      font-size: 16px;
      border: 2px solid #ddd;
      border-radius: 8px;
      transition: border-color 0.3s;
    }

    input[type="text"]:focus {
      border-color: #4facfe;
      outline: none;
    }

    button {
      padding: 12px 20px;
      font-size: 16px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s;
      font-weight: 500;
    }

    .btn-primary {
      background: #4facfe;
      color: white;
    }

    .btn-primary:hover {
      background: #00c6ff;
      transform: translateY(-2px);
    }

    .btn-secondary {
      background: #6c757d;
      color: white;
    }

    .btn-secondary:hover {
      background: #5a6268;
    }

    /* Weather Display */
    .weather-display {
      display: grid;
      grid-template-columns: 2fr 1fr;
      gap: 30px;
      margin-bottom: 30px;
    }

    .weather-main {
      background: linear-gradient(135deg, #f8f9fa, #e9ecef);
      padding: 30px;
      border-radius: 12px;
      text-align: center;
    }

    .weather-main h2 {
      font-size: 24px;
      margin-bottom: 10px;
      color: #333;
    }

    .weather-main .temp {
      font-size: 48px;
      font-weight: 300;
      color: #4facfe;
      margin: 20px 0;
    }

    .weather-main .description {
      font-size: 18px;
      color: #666;
      text-transform: capitalize;
      margin-bottom: 20px;
    }

    .weather-details {
      display: grid;
      gap: 15px;
    }

    .detail-card {
      background: #f8f9fa;
      padding: 20px;
      border-radius: 8px;
      border-left: 4px solid #4facfe;
    }

    .detail-card h4 {
      font-size: 14px;
      color: #666;
      margin-bottom: 8px;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .detail-card .value {
      font-size: 20px;
      font-weight: 600;
      color: #333;
    }

    /* Weather Statistics */
    .weather-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-top: 30px;
    }

    .stat-card {
      background: #f8f9fa;
      padding: 20px;
      border-radius: 8px;
      text-align: center;
      border: 2px solid #e9ecef;
      transition: all 0.3s;
    }

    .stat-card:hover {
      border-color: #4facfe;
      transform: translateY(-5px);
    }

    .stat-card .icon {
      font-size: 24px;
      color: #4facfe;
      margin-bottom: 10px;
    }

    .stat-card .label {
      font-size: 14px;
      color: #666;
      margin-bottom: 5px;
    }

    .stat-card .value {
      font-size: 18px;
      font-weight: 600;
      color: #333;
    }

    /* Forecast Section */
    .forecast-list {
      display: grid;
      gap: 15px;
    }

    .forecast-item {
      display: grid;
      grid-template-columns: 1fr 2fr 1fr 1fr;
      align-items: center;
      padding: 20px;
      background: #f8f9fa;
      border-radius: 8px;
      gap: 20px;
    }

    .forecast-date {
      font-weight: 600;
      color: #333;
    }

    .forecast-weather {
      text-transform: capitalize;
      color: #666;
    }

    .forecast-temp {
      text-align: center;
    }

    .forecast-temp .high {
      font-weight: 600;
      color: #333;
    }

    .forecast-temp .low {
      color: #666;
      margin-left: 10px;
    }

    /* Analysis Section */
    .analysis-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 30px;
    }

    .analysis-card {
      background: #f8f9fa;
      padding: 25px;
      border-radius: 12px;
      border: 1px solid #e9ecef;
    }

    .analysis-card h3 {
      margin-bottom: 20px;
      color: #333;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .chart-placeholder {
      height: 200px;
      background: linear-gradient(45deg, #e9ecef, #f8f9fa);
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #666;
      font-size: 16px;
      margin-bottom: 15px;
      border: 2px dashed #dee2e6;
    }

    .insights {
      background: white;
      padding: 15px;
      border-radius: 8px;
      font-size: 14px;
      color: #666;
    }

    .insights h5 {
      color: #333;
      margin-bottom: 10px;
    }

    .insights p {
      margin-bottom: 5px;
    }

    /* Error and Loading States */
    .error {
      background: #f8d7da;
      color: #721c24;
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 20px;
      border: 1px solid #f5c6cb;
    }

    .loading {
      text-align: center;
      padding: 40px;
      color: #666;
    }

    .spinner {
      border: 3px solid #f3f3f3;
      border-top: 3px solid #4facfe;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
      margin: 0 auto 20px;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .hidden {
      display: none !important;
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .nav-tabs {
        flex-direction: column;
      }
      
      .weather-display {
        grid-template-columns: 1fr;
      }
      
      .search-container {
        flex-direction: column;
      }
      
      .search-box {
        min-width: 100%;
      }
      
      .forecast-item {
        grid-template-columns: 1fr;
        text-align: center;
        gap: 10px;
      }
      
      .analysis-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Navigation Tabs -->
    <div class="nav-tabs">
      <button class="tab-btn active" onclick="switchTab('current')">Current Weather</button>
      <button class="tab-btn" onclick="switchTab('forecast')">5-Day Forecast</button>
      <button class="tab-btn" onclick="switchTab('analysis')">Analysis</button>
    </div>

    <!-- Content Area -->
    <div class="content">
      <!-- Current Weather Tab -->
      <div id="current-tab" class="tab-content active">
        <div class="search-section">
          <h2>Weather App with Analysis</h2>
          <div class="search-container">
            <div class="search-box">
              <input type="text" id="city" placeholder="Enter city name (e.g., Delhi)" />
            </div>
            <button class="btn-primary" onclick="getWeather()">Get Weather</button>
            <button class="btn-secondary" onclick="getCurrentLocationWeather()">üìç Current Location</button>
          </div>
        </div>

        <div id="error" class="error hidden"></div>
        <div id="loading" class="loading hidden">
          <div class="spinner"></div>
          <p>Loading weather data...</p>
        </div>

        <div id="weather-output" class="hidden">
          <div class="weather-display">
            <div class="weather-main">
              <h2 id="city-name">City Name</h2>
              <div class="temp" id="temperature">--¬∞C</div>
              <div class="description" id="weather-desc">--</div>
              <div style="margin-top: 20px;">
                <p><strong>Feels like:</strong> <span id="feels-like">--¬∞C</span></p>
                <p><strong>Sunrise:</strong> <span id="sunrise">--:--</span> | <strong>Sunset:</strong> <span id="sunset">--:--</span></p>
              </div>
            </div>

            <div class="weather-details">
              <div class="detail-card">
                <h4>üíß Humidity</h4>
                <div class="value" id="humidity">--%</div>
              </div>
              <div class="detail-card">
                <h4>üå™Ô∏è Wind</h4>
                <div class="value" id="wind">-- m/s</div>
              </div>
              <div class="detail-card">
                <h4>üìä Pressure</h4>
                <div class="value" id="pressure">-- hPa</div>
              </div>
              <div class="detail-card">
                <h4>üëÅÔ∏è Visibility</h4>
                <div class="value" id="visibility">-- km</div>
              </div>
            </div>
          </div>

          <div class="weather-stats">
            <div class="stat-card">
              <div class="icon">üå°Ô∏è</div>
              <div class="label">Heat Index</div>
              <div class="value" id="heat-index">--¬∞C</div>
            </div>
            <div class="stat-card">
              <div class="icon">‚ùÑÔ∏è</div>
              <div class="label">Dew Point</div>
              <div class="value" id="dew-point">--¬∞C</div>
            </div>
            <div class="stat-card">
              <div class="icon">‚òÄÔ∏è</div>
              <div class="label">UV Index</div>
              <div class="value" id="uv-index">--</div>
            </div>
            <div class="stat-card">
              <div class="icon">üå¨Ô∏è</div>
              <div class="label">Air Quality</div>
              <div class="value" id="air-quality">--</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Forecast Tab -->
      <div id="forecast-tab" class="tab-content">
        <h2>5-Day Weather Forecast</h2>
        <div id="forecast-loading" class="loading hidden">
          <div class="spinner"></div>
          <p>Loading forecast data...</p>
        </div>
        <div id="forecast-output" class="forecast-list">
          <p style="text-align: center; color: #666; padding: 40px;">Select a city to view the forecast</p>
        </div>
      </div>

      <!-- Analysis Tab -->
      <div id="analysis-tab" class="tab-content">
        <h2>Weather Analysis</h2>
        <div class="analysis-grid">
          <div class="analysis-card">
            <h3>üìà Temperature Trends</h3>
            <div class="chart-placeholder">Temperature Chart (7 days)</div>
            <div class="insights" id="temp-analysis">
              <h5>Temperature Analysis</h5>
              <p>Select a city to view temperature trends and analysis</p>
            </div>
          </div>

          <div class="analysis-card">
            <h3>üí® Wind Analysis</h3>
            <div class="chart-placeholder">Wind Speed & Direction</div>
            <div class="insights" id="wind-analysis">
              <h5>Wind Patterns</h5>
              <p>Wind speed and direction analysis will appear here</p>
            </div>
          </div>

          <div class="analysis-card">
            <h3>üíß Humidity Patterns</h3>
            <div class="chart-placeholder">Humidity Levels</div>
            <div class="insights" id="humidity-analysis">
              <h5>Humidity Analysis</h5>
              <p>Humidity pattern analysis will appear here</p>
            </div>
          </div>

          <div class="analysis-card">
            <h3>üåç Weather Summary</h3>
            <div class="insights" id="weather-summary">
              <h5>Current Conditions Summary</h5>
              <p>Overall weather analysis and recommendations will appear here</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    const API_KEY = "enter your API KEY";
    let currentWeatherData = null;

    // Tab switching functionality
    function switchTab(tabName) {
      // Remove active class from all tabs and content
      document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
      document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
      
      // Add active class to selected tab and content
      event.target.classList.add('active');
      document.getElementById(tabName + '-tab').classList.add('active');
      
      // Load tab-specific content
      if (tabName === 'forecast' && currentWeatherData) {
        loadForecast(currentWeatherData.name);
      } else if (tabName === 'analysis' && currentWeatherData) {
        loadAnalysis(currentWeatherData);
      }
    }

    function showLoading(show, elementId = 'loading') {
      const element = document.getElementById(elementId);
      if (show) {
        element.classList.remove('hidden');
      } else {
        element.classList.add('hidden');
      }
    }

    function showError(message) {
      const errorElement = document.getElementById('error');
      errorElement.textContent = message;
      errorElement.classList.remove('hidden');
      document.getElementById('weather-output').classList.add('hidden');
    }

    function hideError() {
      document.getElementById('error').classList.add('hidden');
    }

    function displayWeather(data) {
      currentWeatherData = data;
      hideError();
      
      // Update main weather display
      document.getElementById('city-name').textContent = `${data.name}, ${data.sys.country}`;
      document.getElementById('temperature').textContent = `${Math.round(data.main.temp)}¬∞C`;
      document.getElementById('weather-desc').textContent = data.weather[0].description;
      document.getElementById('feels-like').textContent = `${Math.round(data.main.feels_like)}¬∞C`;
      
      // Update weather details
      document.getElementById('humidity').textContent = `${data.main.humidity}%`;
      document.getElementById('wind').textContent = `${data.wind.speed} m/s`;
      document.getElementById('pressure').textContent = `${data.main.pressure} hPa`;
      document.getElementById('visibility').textContent = `${(data.visibility / 1000).toFixed(1)} km`;
      
      // Update sun times
      const sunrise = new Date(data.sys.sunrise * 1000);
      const sunset = new Date(data.sys.sunset * 1000);
      document.getElementById('sunrise').textContent = sunrise.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });
      document.getElementById('sunset').textContent = sunset.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });
      
      // Calculate and display additional metrics
      const heatIndex = calculateHeatIndex(data.main.temp, data.main.humidity);
      const dewPoint = calculateDewPoint(data.main.temp, data.main.humidity);
      const uvIndex = Math.floor(Math.random() * 11) + 1; // Mock UV index
      const airQuality = Math.floor(Math.random() * 5) + 1; // Mock air quality
      
      document.getElementById('heat-index').textContent = `${heatIndex}¬∞C`;
      document.getElementById('dew-point').textContent = `${dewPoint}¬∞C`;
      document.getElementById('uv-index').textContent = uvIndex;
      document.getElementById('air-quality').textContent = getAirQualityText(airQuality);
      
      document.getElementById('weather-output').classList.remove('hidden');
    }

    function calculateHeatIndex(temp, humidity) {
      // Simplified heat index calculation
      const tempF = temp * 9/5 + 32;
      if (tempF < 80) return Math.round(temp);
      
      const hi = -42.379 + 2.04901523 * tempF + 10.14333127 * humidity - 
                 0.22475541 * tempF * humidity - 6.83783e-3 * tempF * tempF - 
                 5.481717e-2 * humidity * humidity + 1.22874e-3 * tempF * tempF * humidity + 
                 8.5282e-4 * tempF * humidity * humidity - 1.99e-6 * tempF * tempF * humidity * humidity;
      
      return Math.round((hi - 32) * 5/9);
    }

    function calculateDewPoint(temp, humidity) {
      // Simplified dew point calculation
      const a = 17.27;
      const b = 237.7;
      const alpha = ((a * temp) / (b + temp)) + Math.log(humidity / 100);
      const dewPoint = (b * alpha) / (a - alpha);
      return Math.round(dewPoint);
    }

    function getAirQualityText(aqi) {
      const levels = ['Good', 'Fair', 'Moderate', 'Poor', 'Very Poor'];
      return levels[aqi - 1] || 'Unknown';
    }

    async function getWeather() {
      const city = document.getElementById('city').value.trim();
      if (!city) {
        showError('Please enter a city name.');
        return;
      }

      showLoading(true);
      const apiUrl = `https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${API_KEY}&units=metric`;

      try {
        const response = await fetch(apiUrl);
        const data = await response.json();
        
        if (data.cod !== 200) {
          throw new Error(data.message);
        }
        
        displayWeather(data);
      } catch (error) {
        showError("Error: " + error.message);
      } finally {
        showLoading(false);
      }
    }

    async function getCurrentLocationWeather() {
      if (!navigator.geolocation) {
        showError('Geolocation is not supported by your browser.');
        return;
      }

      showLoading(true);

      try {
        const position = await new Promise((resolve, reject) => {
          navigator.geolocation.getCurrentPosition(resolve, reject);
        });

        const { latitude, longitude } = position.coords;
        const apiUrl = `https://api.openweathermap.org/data/2.5/weather?lat=${latitude}&lon=${longitude}&appid=${API_KEY}&units=metric`;

        const response = await fetch(apiUrl);
        const data = await response.json();
        
        if (data.cod !== 200) {
          throw new Error(data.message);
        }
        
        displayWeather(data);
      } catch (error) {
        showError("Error fetching location: " + error.message);
      } finally {
        showLoading(false);
      }
    }

    async function loadForecast(cityName) {
      showLoading(true, 'forecast-loading');
      const apiUrl = `https://api.openweathermap.org/data/2.5/forecast?q=${cityName}&appid=${API_KEY}&units=metric`;

      try {
        const response = await fetch(apiUrl);
        const data = await response.json();
        
        if (data.cod !== "200") {
          throw new Error(data.message);
        }
        
        displayForecast(data);
      } catch (error) {
        document.getElementById('forecast-output').innerHTML = `<p style="text-align: center; color: red;">Error loading forecast: ${error.message}</p>`;
      } finally {
        showLoading(false, 'forecast-loading');
      }
    }

    function displayForecast(data) {
      const forecastContainer = document.getElementById('forecast-output');
      const dailyForecasts = groupForecastByDay(data.list);
      
      forecastContainer.innerHTML = dailyForecasts.slice(0, 5).map(forecast => {
        const date = new Date(forecast.dt * 1000);
        const dayName = date.toLocaleDateString('en-US', { weekday: 'long' });
        const dateStr = date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
        
        return `
          <div class="forecast-item">
            <div class="forecast-date">
              <div>${dayName}</div>
              <div style="font-size: 14px; color: #666;">${dateStr}</div>
            </div>
            <div class="forecast-weather">${forecast.weather[0].description}</div>
            <div class="forecast-temp">
              <span class="high">${Math.round(forecast.main.temp_max)}¬∞</span>
              <span class="low">${Math.round(forecast.main.temp_min)}¬∞</span>
            </div>
            <div>
              üíß ${forecast.main.humidity}%<br>
              üí® ${forecast.wind.speed} m/s
            </div>
          </div>
        `;
      }).join('');
    }

    function groupForecastByDay(forecasts) {
      const grouped = {};
      
      forecasts.forEach(forecast => {
        const date = new Date(forecast.dt * 1000).toDateString();
        if (!grouped[date]) {
          grouped[date] = { ...forecast };
          grouped[date].main.temp_max = forecast.main.temp;
          grouped[date].main.temp_min = forecast.main.temp;
        } else {
          grouped[date].main.temp_max = Math.max(grouped[date].main.temp_max, forecast.main.temp);
          grouped[date].main.temp_min = Math.min(grouped[date].main.temp_min, forecast.main.temp);
        }
      });
      
      return Object.values(grouped);
    }

    function loadAnalysis(data) {
      // Temperature analysis
      const tempRange = Math.abs(data.main.temp_max - data.main.temp_min);
      const tempAnalysis = document.getElementById('temp-analysis');
      tempAnalysis.innerHTML = `
        <h5>Temperature Analysis</h5>
        <p><strong>Current:</strong> ${Math.round(data.main.temp)}¬∞C</p>
        <p><strong>Feels like:</strong> ${Math.round(data.main.feels_like)}¬∞C</p>
        <p><strong>Daily range:</strong> ${tempRange ? tempRange.toFixed(1) : 'N/A'}¬∞C</p>
        <p><strong>Comfort level:</strong> ${getComfortLevel(data.main.temp, data.main.humidity)}</p>
      `;

      // Wind analysis
      const windAnalysis = document.getElementById('wind-analysis');
      windAnalysis.innerHTML = `
        <h5>Wind Patterns</h5>
        <p><strong>Speed:</strong> ${data.wind.speed} m/s</p>
        <p><strong>Direction:</strong> ${getWindDirection(data.wind.deg)}</p>
        <p><strong>Condition:</strong> ${getWindCondition(data.wind.speed)}</p>
      `;

      // Humidity analysis
      const humidityAnalysis = document.getElementById('humidity-analysis');
      humidityAnalysis.innerHTML = `
        <h5>Humidity Analysis</h5>
        <p><strong>Current:</strong> ${data.main.humidity}%</p>
        <p><strong>Comfort:</strong> ${getHumidityComfort(data.main.humidity)}</p>
        <p><strong>Dew point:</strong> ${calculateDewPoint(data.main.temp, data.main.humidity)}¬∞C</p>
      `;

      // Weather summary
      const weatherSummary = document.getElementById('weather-summary');
      weatherSummary.innerHTML = `
        <h5>Weather Summary for ${data.name}</h5>
        <p><strong>Condition:</strong> ${data.weather[0].description}</p>
        <p><strong>Visibility:</strong> ${(data.visibility / 1000).toFixed(1)} km</p>
        <p><strong>Pressure:</strong> ${data.main.pressure} hPa (${getPressureDescription(data.main.pressure)})</p>
        <p><strong>Overall:</strong> ${getOverallCondition(data)}</p>
      `;
    }

    function getComfortLevel(temp, humidity) {
      if (temp < 10) return 'Too cold';
      if (temp > 30) return 'Too hot';
      if (humidity > 70) return 'Too humid';
      if (humidity < 30) return 'Too dry';
      return 'Comfortable';
    }

    function getWindDirection(degrees) {
      const directions = ['N', 'NNE', 'NE', 'ENE', 'E', 'ESE', 'SE', 'SSE', 'S', 'SSW', 'SW', 'WSW', 'W', 'WNW', 'NW', 'NNW'];
      const index = Math.round(degrees / 22.5) % 16;
      return directions[index];
    }

    function getWindCondition(speed) {
      if (speed < 1) return 'Calm';
      if (speed < 3) return 'Light breeze';
      if (speed < 7) return 'Moderate breeze';
      if (speed < 12) return 'Strong breeze';
      return 'Very strong wind';
    }

    function getHumidityComfort(humidity) {
      if (humidity < 30) return 'Very dry';
      if (humidity < 50) return 'Comfortable';
      if (humidity < 70) return 'Humid';
      return 'Very humid';
    }

    function getPressureDescription(pressure) {
      if (pressure < 1000) return 'Low pressure';
      if (pressure > 1020) return 'High pressure';
      return 'Normal pressure';
    }

    function getOverallCondition(data) {
      const temp = data.main.temp;
      const humidity = data.main.humidity;
      const windSpeed = data.wind.speed;
      
      if (temp > 25 && humidity < 60 && windSpeed < 5) {
        return 'Perfect weather conditions';
      } else if (temp < 0 || windSpeed > 15) {
        return 'Harsh weather conditions';
      } else {
        return 'Moderate weather conditions';
      }
    }

    // Allow Enter key to search
    document.getElementById('city').addEventListener('keypress', function(e) {
      if (e.key === 'Enter') {
        getWeather();
      }
    });
  </script>
</body>

</html>
